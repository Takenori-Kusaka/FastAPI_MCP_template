# プログラムエラートラブルシューティングガイド

以下は、プログラムエラーが発生した際の体系的なトラブルシューティングアプローチを定義した.clinerulesファイルです。このガイドラインに従ってエラー解析と解決策の提案を行ってください。

## エラー分析の基本原則

エラーに遭遇した場合、以下の観点から問題を体系的に分析してください。分析結果は明確に整理された形で提示し、可能性のある解決策を示してください。

### 問題の特定と範囲の確認

- システム/フレームワーク/プロセスを特定する
  - どの技術スタックが関連しているのか
  - その技術に特有のエラーパターンがあるか
  - 特定のバージョンに関連する既知の問題がないか

- ログ情報の収集と分析
  - エラーメッセージの正確な内容を確認
  - タイムスタンプから問題発生の順序を追跡
  - ログレベル（ERROR, WARNING, INFO など）の重要性を区別
  - 関連するイベントIDやエラーコードを特定

### コードと実行フローの調査

- エラー発生箇所の特定
  - スタックトレースから呼び出し階層を分析
  - エラーを投げた正確な行番号とファイルを確認
  - 実行フローのどの段階で問題が発生したか

- 関数とその挙動の分析
  - エラーが発生した関数の目的と期待される挙動
  - 受け取る引数とその型・値の妥当性
  - 戻り値と例外処理の設計

### 障害の原因分析と検証

- 考えられるエラー原因
  - 入力値の問題（NULL、形式不正、範囲外など）
  - リソース不足（メモリ、ディスク、接続数など）
  - 同時実行による競合条件
  - 外部依存サービスの障害
  - 権限不足やセキュリティ制約

- 検証方法の検討
  - 必要な追加ログの特定
  - 再現手順の整理
  - 切り分け調査の方針
  - 仮説に基づいた検証コードの提案

## トラブルシューティングのプロセス

### 1. 情報収集フェーズ

```
# 以下の情報を整理して収集する
- 発生している正確なエラーメッセージ
- エラー発生時の実行環境（OS、ブラウザ、サーバー構成等）
- 関連するシステムコンポーネントの状態
- 実行中のプロセスID
- 問題発生前後のユーザー操作やシステム変更
```

### 2. 分析フェーズ

```
# システムやフレームワークの特定
- 対象のシステム名: 
- バージョン: 
- 関連する依存関係: 

# ログ情報の分析
- エラーログの場所: 
- 関連するログエントリ: 
- タイムスタンプパターン: 

# 実装の確認
- 問題のコードパス: 
- 関連するファイル: 
- 最後に正常動作した処理: 
- エラー発生関数: 
```

### 3. 仮説と検証フェーズ

```
# 考えられる原因と対応する検証方法
1. 仮説: 
   検証方法: 
   追加で必要なログ: 

2. 仮説:
   検証方法: 
   追加で必要なログ: 
```

### 4. 解決策の提案

```
# 検証結果に基づいた解決策
- 短期対応: 
- 根本解決策: 
- 再発防止策: 
```

## エラータイプ別ガイドライン

### エラーログ確認の優先順位

- 重大度の高いエラー（FATAL, ERROR）を最初に確認[3]
- 時系列順に問題発生前後のログを調査
- アプリケーションログとシステムログの両方を確認
- エラー発生時刻が近いすべてのサブシステムのログを収集

### フレームワーク別のエラー確認方法

#### フロントエンド
- ブラウザのコンソールログ
- ネットワークタブでのAPI通信エラー
- レンダリングに関するエラー（React, Vueなど）

#### バックエンド
- サーバーログ（アプリケーションサーバー、Webサーバー）
- データベース接続エラー
- APIレスポンスのステータスコード

#### インフラストラクチャ
- クラウドサービスのダッシュボード
- サーバーリソース使用状況（CPU, メモリ, ディスク）
- ネットワーク接続状態

## エラー処理のベストプラクティス

- エッジケースの適切な処理[1]
- 早期リターンパターンの活用[1]
- 意図的な空文字やnullの返却における明確な記録[1]
- 引数の型と値の厳格な検証[1][6]
- 適切なエラーメッセージとコンテキスト情報の記録

## 特別なケースへの対応

### 本番環境での問題
- ユーザー影響範囲の特定を優先
- 暫定対応と根本解決を区別して検討
- 運用チームへの適切な情報共有

### パフォーマンス問題
- ボトルネックの特定（プロファイリングツールの活用）
- リソース使用状況の確認
- クエリ実行計画の分析

### セキュリティ関連問題
- 脆弱性の範囲と影響を迅速に評価
- 必要に応じてアクセス制限を実施
- インシデント対応チームへの報告手順

この.clinerulesに従って、エラー発生時には体系的なトラブルシューティングを行い、効率的な問題解決を目指してください。

Citations:
[1] https://zenn.dev/berry_blog/articles/c72564d4d89926
[2] https://qiita.com/Synohara/items/ee7b9687db6d544e6fc2
[3] https://pc2.jp/tips/err_log.html
[4] https://qiita.com/tomada/items/635c2964f011af89b08c
[5] https://www.issoh.co.jp/tech/details/6033/
[6] https://zenn.dev/kimkiyong/scraps/9642c2ef3e08b3
[7] https://note.com/unikoukokun/n/n3977a603633c
[8] https://github.com/jonghyo/nextjs-roocode-template/blob/main/.clinerules
[9] https://qiita.com/reoring/items/0c359cc4323bf89965a1
[10] https://www.partitionwizard.jp/partitionmagic/windows-10-crash-log.html

---
Perplexity の Eliot より: pplx.ai/share